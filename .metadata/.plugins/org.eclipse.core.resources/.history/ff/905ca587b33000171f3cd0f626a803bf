import java.io.File;
import java.io.FileNotFoundException;
import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

import org.jgap.InvalidConfigurationException;
import org.jgap.gp.impl.DeltaGPFitnessEvaluator;
import org.jgap.gp.impl.GPConfiguration;

public class Main {

	public static Float[][] readTable(String tableFileName) throws FileNotFoundException{
		
		File tableFile = new File(tableFileName);
		Scanner sc = new Scanner(tableFile);
		sc.nextLine();
		sc.nextLine();
		List<Float> xFromFile = new ArrayList<Float>();
		List<Float> yFromFile = new ArrayList<Float>();
		while(sc.hasNext()){
			xFromFile.add(sc.nextFloat());
			yFromFile.add(sc.nextFloat());
			sc.nextLine();
		}
		sc.close();
		return new Float[][]{
				xFromFile.toArray(new Float[xFromFile.size()]),
				yFromFile.toArray(new Float[yFromFile.size()]),
		};
	}

	public static void main(String[] args) throws InvalidConfigurationException, FileNotFoundException {
		GPConfiguration config = new GPConfiguration();

		// We use a delta fitness evaluator because we compute a defect rate,
		// not
		// a point score!
		// ----------------------------------------------------------------------
		config.setGPFitnessEvaluator(new DeltaGPFitnessEvaluator());
		config.setMaxInitDepth(6);
		config.setPopulationSize(100);
		Float[][] xAndY = readTable(args[0]);
		config.setFitnessFunction(new RegressionFitnessFunction(xAndY[0], xAndY[1]));
		
	}

}
